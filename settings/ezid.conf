# EZID configuration file.
#
# In an extension to Python's configuration file format, we allow an
# option to be prefixed with a deployment level in braces, e.g.,
#
#   {production}the_answer: 42
#
# If a deployment-level-specific value for an option corresponding to
# the current deployment level exists, that value is used; otherwise,
# the value for the option with no deployment level is used.
#
# Passwords and other sensitive information can and should be stored
# in the "shadow" version of this file.
#
# This file can be dynamically reloaded by sending an empty POST
# request to the URL http://{host}/ezid/admin/reload (admin
# authentication required).

[DEFAULT]
ezid_base_url: http://n2t.net/ezid
bind_noid: [http://...]
{staging}bind_noid: [http://...]
{workflow}bind_noid: [http://...]
{production}bind_noid: [http://...]
default_doi_profile: datacite
default_ark_profile: erc
default_urn_uuid_profile: erc

[prefixes]
# Note: the TESTARK and TESTDOI prefixes are special: they must always
# be present and are available to all users.  Also, the keys below are
# not just internal to this file, but are stored and referenced
# externally as well (e.g., in LDAP).  The cdlagent key is referenced
# by module ezidadmin.  NONE is reserved.
keys: TESTARK,TESTDOI,ezidark,eziddoi,aasark,aasdoi,cdlagent,cdlaux,cdldsc,crdp_am,digitalantark,digitalantdoi,dryad,escholarship,esipark,esipdoi,merritt,nasaark,nasadoi,ncarark,ncardoi,nceasdoi,oac,purdueark,purduedoi,qdrcqrmark,qdrcqrmdoi,ucbark,ucbischool,ucblegacylibraryark,ucblibraryark,uclaark,uclalegacyark,ucsbark,ucsbdoi,ucscark,ucsd,urnuuid

[prefix_TESTARK]
prefix: ark:/99999/fk4
name: ARK Test
minter: http://noid.cdlib.org/nd/noidu_fk4

[prefix_TESTDOI]
prefix: doi:10.5072/FK2
name: DOI Test
minter: http://noid.cdlib.org/nd/noidu_fk2
datacenter: cdl

[prefix_ezidark]
prefix: ark:/13030/c7
name: EZID ARK
minter: http://noid.cdlib.org/nd/noidu_c7

[prefix_eziddoi]
prefix: doi:10.5060/D2
name: EZID DOI
minter: http://noid.cdlib.org/nd/noidu_d2
datacenter: cdl

[prefix_aasark]
prefix: ark:/13030/r3
name: AAS ARK
minter: http://noid.cdlib.org/nd/noidu_r3

[prefix_aasdoi]
prefix: doi:10.5060/D8
name: AAS DOI
minter: http://noid.cdlib.org/nd/noidu_d8
datacenter: cdl

[prefix_cdlagent]
prefix: ark:/99166/p9
name: CDL Agent
minter: http://noid.cdlib.org/nd/noidu_p9

[prefix_cdlaux]
prefix: ark:/13030/j2
name: CDL Aux
minter: http://noid.cdlib.org/nd/noidu_j2

[prefix_cdldsc]
prefix: ark:/13030/c8
name: CDL DSC
minter: http://noid.cdlib.org/nd/noidu_c8

[prefix_crdp_am]
prefix: ark:/19153/b2
name: CRDP d'Aix-Marseille
minter: http://noid.cdlib.org/nd/noidu_b2

[prefix_digitalantark]
prefix: ark:/13030/xcv8
name: Digital Antiquity ARK
minter: http://noid.cdlib.org/nd/noidu_xcv8

[prefix_digitalantdoi]
prefix: doi:10.5060/XCV8
name: Digital Antiquity DOI
minter: http://noid.cdlib.org/md/noidu_xcv8
datacenter: cdl

[prefix_dryad]
prefix: doi:10.5061/
name: Dryad
minter: http://noid.cdlib.org/nd/noidu_rd8
datacenter: cdl

[prefix_escholarship]
prefix: ark:/13030/qt
name: eScholarship
minter:

[prefix_esipark]
prefix: ark:/13030/p4
name: ESIP ARK
minter: http://noid.cdlib.org/nd/noidu_p4

[prefix_esipdoi]
prefix: doi:10.5060/D4
name: ESIP DOI
minter: http://noid.cdlib.org/nd/noidu_d4
datacenter: cdl

[prefix_merritt]
prefix: ark:/13030/m5
name: Merritt
minter: http://noid.cdlib.org/nd/noidu_m5

[prefix_nasaark]
prefix: ark:/13030/p5
name: NASA ARK
minter: http://noid.cdlib.org/nd/noidu_p5

[prefix_nasadoi]
prefix: doi:10.5060/D5
name: NASA DOI
minter: http://noid.cdlib.org/nd/noidu_d5
datacenter: cdl

[prefix_ncarark]
prefix: ark:/13030/d7
name: NCAR ARK
minter: http://noid.cdlib.org/nd/noidu_d7

[prefix_ncardoi]
prefix: doi:10.5060/D6
name: NCAR DOI
minter: http://noid.cdlib.org/nd/noidu_d6
datacenter: cdl

[prefix_nceasdoi]
prefix: doi:10.5060/F2
name: NCEAS DOI
minter:
datacenter: cdl

[prefix_oac]
prefix: ark:/13030/kt
name: OAC
minter:

[prefix_purdueark]
prefix: ark:/34231/c6
name: Purdue ARK
minter: http://noid.cdlib.org/nd/noidu_c6

[prefix_purduedoi]
prefix: doi:10.4231/
name: Purdue DOI
minter: http://noid.cdlib.org/nd/noidu_d3
datacenter: purdue

[prefix_qdrcqrmark]
prefix: ark:/85064/f5
name: QDR CQRM ARK
minter: http://noid.cdlib.org/nd/noidu_f5

[prefix_qdrcqrmdoi]
prefix: doi:10.5064/F6
name: QDR CQRM DOI
minter: http://noid.cdlib.org/nd/noidu_f6
datacenter: qdr

[prefix_ucbark]
prefix: ark:/28722/d9
name: UC Berkeley ARK
minter: http://noid.cdlib.org/nd/noidu_d9

[prefix_ucbischool]
prefix: ark:/28722/k2
name: UCB iSchool
minter: http://noid.cdlib.org/nd/noidu_ucbek

[prefix_ucblegacylibraryark]
prefix: ark:/13030/hb
name: UCB Legacy Library ARK
minter:

[prefix_ucblibraryark]
prefix: ark:/28722/bk
name: UCB Library ARK
minter:

[prefix_uclaark]
prefix: ark:/21198/r1
name: UCLA ARK
minter: http://noid.cdlib.org/nd/noidu_r1

[prefix_uclalegacyark]
prefix: ark:/21198/zz
name: UCLA Legacy ARK
minter:

[prefix_ucsbark]
prefix: ark:/48907/f3
name: UCSB ARK
minter: http://noid.cdlib.org/nd/noidu_f3

[prefix_ucsbdoi]
prefix: doi:10.5062/F4
name: UCSB DOI
minter: http://noid.cdlib.org/nd/noidu_f4
datacenter: ucsb

[prefix_ucscark]
prefix: ark:/38305/f1
name: UCSC ARK
minter: http://noid.cdlib.org/nd/noidu_f1

[prefix_ucsd]
prefix: ark:/20775/
name: UCSD
minter:

[prefix_urnuuid]
prefix: urn:uuid:
name: UUID URN
minter:

[datacite]
enabled: false
{production}enabled: true
doi_url: https://mds.datacite.org/doi
metadata_url: https://mds.datacite.org/metadata
num_attempts: 2
datacenters: cdl,purdue,qdr,ucsb

[datacenter_cdl]
name: CDL.CDL
password: [password]

[datacenter_purdue]
name: PURDUE.EZID
password: [password]

[datacenter_qdr]
name: CDL.QDR
password: [password]

[datacenter_ucsb]
name: CDL.UCSB
password: [password]

[profiles]
# Note: the internal profile is special and must be listed first.
keys: INTERNAL,datacite,dc,erc

[profile_INTERNAL]
name: internal
display_name: internal
file: %(PROJECT_ROOT)s/profiles/internal.profile

[profile_datacite]
name: datacite
display_name: DataCite
file: %(PROJECT_ROOT)s/profiles/datacite.profile

[profile_dc]
name: dc
display_name: Dublin Core
file: %(PROJECT_ROOT)s/profiles/dc.profile

[profile_erc]
name: erc
display_name: ERC
file: %(PROJECT_ROOT)s/profiles/erc.profile

[ldap]
enabled: true
{localdev}enabled: false
# Use caution in setting the following flag to true: EZID caches LDAP
# information in agent identifiers in the bind database.  If, say, an
# instance of EZID uses the same LDAP server as the production
# instance, but a different bind database, then a whole host of
# problems may ensue: information may be cached in the wrong bind
# database, an agent identifier may not exist, an agent identifier may
# be created in the wrong bind database, etc.
updates_enabled: false
{production}updates_enabled: true
server: [ldaps://...]
{localdev}server: ldaps://localhost:1636/
base_dn: ou=uc3,dc=cdlib,dc=org
user_dn_template: uid=%s,ou=People,ou=uc3,dc=cdlib,dc=org
group_dn_template: o=%s,ou=ezid-groups,ou=uc3,dc=cdlib,dc=org
# To clarify the following: admin_username is the username of the EZID
# administrator account, which is special to EZID but otherwise a
# regular LDAP user.  ldap_admin_dn is the (privileged) LDAP
# administrator account.
admin_username: admin
admin_password: [password]
ldap_admin_dn: cn=Directory Manager
ldap_admin_password: [password]

# The following user and group options are used only if LDAP is *not*
# enabled.  (The EZID administrator username is always determined by
# ldap.admin_username above, though.)

[users]
keys: admin,gjanee

[user_admin]
password: [password]
id: ark:/99166/p9kw57h4w
group: admin
co_owners:

[user_gjanee]
password: [password]
id: ark:/99166/p92z12p14
group: cdl
co_owners:

[groups]
keys: admin,cdl

# Enter "NONE" for the prefixes below to disable identifier creation.

[group_admin]
id: ark:/99166/p9g44hq02
prefixes: *

[group_cdl]
id: ark:/99166/p9z60c16v
prefixes: ezidark,eziddoi

# Logging configuration is per the Python logging.config module.  Note
# that logging is *not* reconfigured when this file is reloaded.

[loggers]
keys: root

[logger_root]
# The logging level must be at least INFO to be able to detect (and
# then manually recover from) errors that occur mid-transaction.
level: INFO
handlers: h

[handlers]
keys: h

[handler_h]
class: handlers.TimedRotatingFileHandler
args: ("%(SITE_ROOT)s/logs/transaction_log", "W6")
formatter: f

[formatters]
keys: f

[formatter_f]
format: %(asctime)s %(message)s
