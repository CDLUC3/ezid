{% load layout_extras %}
{% load metadata_tags %}
{% load i18n %}


<input name="original_profile" id="original_profile"  type="hidden" value="{{current_profile.name}}"/>
<fieldset id="sel_profile" class="fieldset-stacked-no-border" role="group" aria-labelledby="legend-profile">
  <legend id="legend-profile" aria-label="{% trans "Step 4 - Describe the identified object using a chosen profile" %}" class="fieldset-stacked__legend-number-4">
    <h2 class="fieldset__heading-2">{% trans "Choose the metadata profile" %}</h2>
  </legend>
  {% comment %}
    class 'ays-ignore' is used by 'are-you-sure.js' which prevents users from accidentally leaving
    a form they are working on. In this case, we will allow users to choose between shoulder types.
    Although it's best we map already filled in fields over to next profile, which is something we should implement.
  {% endcomment %}

  <div class="fieldset-stacked">
    <div class="fieldset-inline">
      <label class="fieldset-inline__legend create__inline-nested-legend" for="sel_profile">Metadata profile</label>
      <select name="current_profile" id="current_profile" class="fcontrol__select ays-ignorse">
        {% for prof in profile_names %}
        <option value="{{prof.0}}"
        {% if prof.0 == current_profile_name %}
          selected="selected"
        {% endif %}
        >{{prof.1}}</option>
        {% endfor %}
      </select>
      {% help_icon "describe_profile" _("on which profile to use for describing the identifier") %}
    </div>
  </div>
</fieldset>

<br/>

<fieldset id="enter_metadata" class="fieldset-stacked-no-border" role="group" aria-labelledby="legend-enter-metadata">
  <legend id="enter-metadata" aria-label="{% trans "Step 5 - Enter descriptive metadata" %}" class="fieldset-stacked__legend-number-5">
    <h2 class="fieldset__heading-2">{% trans "Enter descriptive metadata" %}</h2>
  </legend>
  <br/>
  {% if manual_profile %}
  <!-- Including manual template -->
    {% include manual_template %}
  {% else %}

  {{ form.form.non_field_errors }}
    {% for field in form.form %}
      {% if field|fieldtype == "TextInput" %}
        {% include "includes/_inlinetext.html" with field=field form_name="create__" reqd=field.field.required %}
      {% elif field|fieldtype == "Select" %}
        {% include "includes/_inlineselect.html" with field=field form_name="create__" reqd=field.field.required %}
      {% endif %}
    {% endfor %}

  {% endif %}
</fieldset>
