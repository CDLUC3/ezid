{% extends "layouts/base.html" %}

{% block title %}View Usage{% endblock %}

{% block content %}
  <div class="grid_9">
    <h1>View Usage</h1>
    <form id="usage_form" action="{% url ui_admin.usage %}" method="post">
    	<label class="left" for="choices">Report for:</label>
				<div class="field_right">
					<select id="choice" name="choice">
						{% for c in choices %}
							<option value="{{c.0}}"
							{% if c.0 == choice %}
								selected="selected"
							{% endif %}
							>{{c.1}}</option>
						{% endfor %}
					</select>
				</div>
    </form>
    <div style="clear:both">&nbsp;</div>
    
    <style>
    	td.a { text-align: left; width: 7em;}
    	td.b { text-align: right; width: 7em;}
    	td.c { text-align: right; width: 7em;}
    	td.d { text-align: right; width: 7em;}
    	td.e { text-align: right; width: 7em;}
    	table {border-collapse:collapse;}
    	table th {text-align: center;}
    	table, th, td {border: 1px solid black;}
    </style>
    {% if report|length > 0 %}
	    <table>
	    	<tr>
	    		<th>Month</th>
	    		<th>ARKs</th>
	    		<th>DOIs</th>
	    		<th>URNs</th>
	    		<th>% with metadata</th>
	    	</tr>
	    	
	    	{% for row in report %}
	    		<tr>
	    			<td class="a">{{row.0}}</td>
	    			<td class="b">{{row.1}}</td>
	    			<td class="c">{{row.2}}</td>
	    			<td class="d">{{row.3}}</td>
	    			<td class="e">{{row.4}}</td>
	    		</tr>
	    	{% endfor %}
	    </table>
	  {% else %}
	  	<p>
	  		There is no usage data for the group or user you selected.
	  		Please choose another group or user to see usage data.
	  	</p>
    {% endif %}
  </div>
  
  <script type="text/javascript">
  	$("#choice").bind("change", function(event){
      $("#usage_form").submit();
    });
  </script>
{% endblock %}