---

## Configure the EZID application

- name: symlink ezid logs
  file:
    path: "{{ app_dir }}/logs"
    src: "{{ app_dir }}/var/log/ezid"
    state: link
- name: symlink download dir
  file:
    path: "{{ app_dir }}/download"
    src: "{{ app_dir }}/var/www/download"
    state: link

- name: settings.py
  template:
    #src: "templates/ezid/settings/settings.py.j2"
    src: "{{ app_dir }}/ezid/settings/settings_template.py"
    dest: "{{ app_dir }}/ezid/settings/settings.py"
    owner: "{{ user }}"
    group: "{{ group }}"
    mode: "0600"

- name: run setup.py
  #ansible.builtin.command: "{{ app_dir }}/ezid/setup.py"
  ansible.builtin.command:
    chdir: "{{ app_dir }}/ezid"
    argv:
      - "{{ app_dir }}/ezid/setup.py"
      - develop
